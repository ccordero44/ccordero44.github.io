<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
<meta http-equiv="x-ua-compatible" content="IE=edge">
<meta name="image" property="og:image" content="https://ccordero44.github.io/thumbnail.jpg">
<meta property="og:title" content="Shop Locator">
<meta name="description" property="og:description" content="Custom Body Shop or Store Locator developed using Javascript, CSS and some HTML elements. The locations are easily updated by manipulating the list.js file.">
<meta property="og:url" content="https://ccordero44.github.io/">
<meta name="author" content="Carlos Cordero">
<meta property="fb:app_id" content="318868405607764" />
<meta property="og:type" content="website" />






<html>

<head>
    <title>Shop Locator</title>
	<link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
   <Link rel="stylesheet" type="text/css" href="stylesheet.css">
    <script type="text/javascript" src="onload.js"></script>
    <script src="fontawesome.js"></script>
    <script src="jQuery v3.js"></script>
    <script src="jQuery Migrate.js"></script>
	<script src="jquery-csv.js"></script>
	<script type="text/javascript" src="counties.js"></script>
    <script src="sorttable.js"></script>
    <script type="text/javascript" src="read-csv.js"></script>
	<script type="text/javascript" src="getPolygonBounds.js"></script>
    <script type="text/javascript" src="mapfunctions.js"></script>
  <!-- <script type="text/javascript" src="list.js"></script>-->
  <script type="text/javascript" src="shops.js"></script>
	<script type="text/javascript" src="hail.js"></script>
    <script type="text/javascript" src="appraisers.js"></script>
    <!-- <script type="text/javascript" src="redLightCams.js"></script> -->
    <script type="text/javascript" src="displatyTime.js"></script>    
    <script type="text/javascript" src="getDate.js"></script>  
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
	
</head>

<body>                                  

   
   <!-- CSS only -->
	
   <script type="text/javascript">
   

	
	$(document).ready( function () {
      
	$('#origin-input').focus(function () {
	resetTables();
	});  
	$.getScript("redLightCams.js", function(){
		console.log("Running redLightCams.js");
	});
	var inputtest = document.getElementById("origin-input");
                        inputtest.addEventListener('click', function () {
                            //removeMarkers();
							if (originInfowindow) originInfowindow.setMap(null);
							if (activeInfoWindow) activeInfoWindow.setMap(null);
                            document.getElementById("origin-input").value = null;
							//document.getElementById("clientAddress").value = null;
                            map.setCenter(resetBounds.getCenter());
							map.fitBounds(resetBounds);
                        });
		
});
		window.onload = Window_onLoad;
		//var myKey = "AIzaSyActTShUbrnDKcB4P94Qh4cj3JpsvdAjyE";

	
		var icons = {
		          shops: {
		            name: 'DRP Body Shops',
		            icon: 'shop.png'
		          },
		          pods: {
		            name: 'CPD POD Cameras',
		            icon: 'podBig.png'
		          },
		          cameras: {
		            name: 'Red Light Cameras',
		            icon: 'redCamBig.png'
		          },
			hail: {
			   name: 'Hail',
			   icon: 'hail.png'
			}
        	};

	        var image = {
	            url: 'shopGreen.png'
	        };
		var imageX = {
			url: 'shopRed.png'
		};
	
	        var image2 = {
	            url: 'data:image/png;base64,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'
	        };
		
	   
	  	 

	        var locations = [];
				for (i = 0; i < shops.length; i++) {   

								
			var shopImage = '<img id="shopImage" title="Click to open Street View" onclick="openStreetView(' + shops[i][6] + ',' + shops[i][7] + ')" src="' + shops[i][9] + '"></img>';
	       
	        var temp = [
	        	["<pre style='margin:0;'><b style='font-weight:bold' class='titleTxt'>" + shops[i][0] + "</b></pre>" /*+ "<br/>" */+ shops[i][1] + "</b><br/>" + shops[i][2] + "<br/><span id='fixture'></span>" + "<br>" + "<i class='bi bi-telephone'></i><span class='phoneTxt'><a href='tel:" + shops[i][3] + "'> " + shops[i][3] + "</a></span></b><br/>" + /*"<span class='fax'> </span><span class='faxTxt'>" + shops[i][4] + "</span></b><br/>" + */"<span id='email'> <i class='bi bi-envelope'></i> <a href='mailto:" + shops[i][5] + "'>" + shops[i][5] + "</a></span><br />" + shopImage],
	        			];
			if (shops[i][5] !== ""){
				var email = document.getElementById("email");
				if (email){
				email.style.display = "inline";
				}	
			}
	        		locations.push(temp);
	        	}
	        var alldestinations = [];
		
				for (i = 0; i < shops.length; i++) {
					alldestinations.push(shops[i][1] + ", " + shops[i][2]);
					//gmarkers.push({lat: shops[i][6], lng: shops[i][7]});
					gmarkers.push(shops[i]);
				}

				
	        var i;
	        var j;
	        var infowindow;
	   	var polyInfowindow;
	        var activeInfoWindow;
	        var resetBounds;
	        var map;
	        var markers = [];
	        var tempmarker = [];
	        var shopmarkers = [];
			var Mycounties = [];
			var tempcounties = [];
	   		//var appraiserPoly = [];
			var tempDiv;
			var clickCo;
			var myWindow;
	   		//var Jerry = [];
//		var Steve = [];
			//var Abbie = [];
	   		var tempappraisers = [];
            var Myappraisers = [];
	   		var lat;
	   		var lng;
	   		var tempAddress;
	   		var custommarker = [];
	   		var dist;
			var polyaddr;
			var inPoly;
			var polyName;
	   		var input;
			var PODmarkers = [];
	   		var PODbounds;
	   		var infoPODwindow;
			var circle;
			var circles = [];
	   		var redCamMarker;
			var redCamMarkers = [];
			var redcamInfoWindow;
			var allLocationCoords = [];
			var testarr = [];
			var sIndex = [];
			var DMResults;
			var DMStatus;
			var activeMarker;
			var scaledsize;
			var originInfowindow;
			const styles = {
			  default: [],
			  hide: [
				{
				  featureType: "poi",
				  stylers: [{ visibility: "off" }],
				},
				{
				  featureType: "transit",
				  elementType: "labels.icon",
				  stylers: [{ visibility: "off" }],
				},
			  ],
			};
        function initMap() {
	       //await myRequest();
         	polyInfowindow = new google.maps.InfoWindow();
            redcamInfoWindow = new google.maps.InfoWindow();
            var mapOptions = {
                mapTypeControl: false,
                zoomControl: true,
                zoomControlOptions: { style: google.maps.ZoomControlStyle.SMALL },
                fullscreenControl: false,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById('map'),
                mapOptions);
            map = map;

            var originInput = document.getElementById('origin-input');
            var btnClickme = document.getElementById('clickMe');
            var clearMap = document.getElementById('clear');
	    var syncMap = document.getElementById('sync');
            var shopList = document.getElementById('listShops');
	    var legend = document.getElementById('legend');
	    var mapButton = document.getElementById('testDiv');
			
			
	    map.controls[google.maps.ControlPosition.TOP_LEFT].push(mapButton);
	    map.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(legend);
	    map.controls[google.maps.ControlPosition.TOP_CENTER].push(syncMap);
            map.controls[google.maps.ControlPosition.TOP_CENTER].push(originInput);
            map.controls[google.maps.ControlPosition.TOP_CENTER].push(btnClickme);
            map.controls[google.maps.ControlPosition.TOP_CENTER].push(clearMap);
            map.controls[google.maps.ControlPosition.TOP_CENTER].push(shopList);
            
            

            var southWest = new google.maps.LatLng(39.801519, -89.620634);
            var northEast = new google.maps.LatLng(42.37009, -87.63416000000001);
            var bounds = new google.maps.LatLngBounds(southWest, northEast);
            var listener = google.maps.event.addListener(map, "idle", function () {
			
                //map.fitBounds(bounds);
			map.setCenter(resetBounds.getCenter());
            map.fitBounds(resetBounds);
                google.maps.event.removeListener(listener);
            });
            
            map.addListener('tilesloaded', function () {
			scaledsize = new google.maps.Size(22, 22);
			if ($(window).width() > 800) {
				$(legend).show();
				$(mapButton).show();
			};
			$(btnClickme).show();
			$(clearMap).show();
			$(shopList).show();
			$(originInput).show();
		        $(syncMap).show();
                document.getElementById("origin-input").innerHTML = 'Tilesloaded Event';
                window.setTimeout(function () {
            
                }, 100);
            });
			for (var key in icons) {
			  var type = icons[key];
			  var name = type.name;
			  var icon = type.icon;
			  var div = document.createElement('div');
			  div.innerHTML = '<img src="' + icon + '"> ' + name;
			  $(legend).append(div);
		
			}
			$('#legend h3').after('<hr/>');
			
            var marker;
            var latlngbounds = new google.maps.LatLngBounds();
			var markerIcon;
			var sv = new google.maps.StreetViewService();
			
            for (i = 0; i < shops.length; i++) {
			if (shops[i][10] === 'yesTow') {
				markerIcon = image;
			}else{
				markerIcon = imageX
			};
			
		var markerTitle = '';
		    if (shops[i][0].indexOf('<br>') > 0) {
			markerTitle = shops[i][0].replaceAll("<br>"," ");
		    }else{
			 markerTitle = shops[i][0];   
		    }
                marker = new google.maps.Marker({
                    position: new google.maps.LatLng(shops[i][6], shops[i][7]),
                    map: map,
                    clickable: true,
                    title: markerTitle,
                    icon: markerIcon

                });
		
		shopmarkers.push(marker);
		
                infowindow = new google.maps.InfoWindow();
				infowindow.setContent('');
                google.maps.event.addListener(marker, 'click', (function (marker, i) {
				
                    return function () {
					activeMarker = marker;
                        var regex = /mi/gi;
                        var shopDist = [];
						var distIcon = ''; 
						var dist = [];
						//for (var j = 0; j < markers.length; j++) {
						
							
							dist = document.getElementById("dist" + i);
						
					if (typeof(dist) != 'undefined' && dist != null)
					{
					   distIcon = "<i class='bi bi-geo' style='font-size: medium;color: black;'> </i>"
					   shopDist = [
						  [dist.innerHTML.replace(regex, "miles away")], 
                        ];
						
					}
						//  };             
      					
						if (originInput.value === ""){
						
							shopDist = [];
							distIcon = '';
						}else
                        document.getElementById("markerPos").innerHTML = marker.getPosition();
var time = DisplayCurrentTime();
var today = todayDate();
var towTitle;
var towClass;
var towText;
if ( shops[i][10] === "yesTow") {
			towClass = "yesTow";
			towTitle = "Tow Request";
			towText = shops[i][8];
		  } else {
			towClass = "noTow";
			towTitle = "No Tows";
			towText = " Not Accepting Tows";
		  };
if (shops[i][8].indexOf("All Star") !== -1) {
	if (shops[i][10] === "yesTow") {
		var tow = "<a href='mailto:dispatch@claimsmgrs.com?subject=Insurance%20Tow%20Request&body=Todays%20Date:%20" + today + "%0ATime%20of%20Request:%20" + time + "%0ATow%20Requested%20By:%0AClaim%20Number:%0AInsured%20Name:%0AInsured%20Phone%20Number:%0AComplete%20VIN:%0AYear,%20make,%20model%20of%20vehicle:%0APick-Up%20Location:%0APick-Up%20Location%20Phone%20Number:%0ADrop%20off%20Location:%0AIs%20the%20vehicle%20released?%0AAdvanced%20charges:%0AWhere%20are%20the%20keys?' title='Tow Request'>" + shops[i][8] + "</a>";
	}else{
		var tow = "<a class='noTow'>Not Accepting Tows</a>";
	};
//var tow = "<a href='#' onclick=\"window.open('Wes Tow Request.pdf', '_blank', 'fullscreen=yes'); return false;\" title='" + towTitle + "'>" + towText + "</a>"
<!-- }else if (shops[i][8].indexOf("Copy Jessica Banuelos") !== -1)  { -->
<!-- var tow = "<a href='mailto:" + shops[i][5] + "?cc=jbanuelos@americanfreedomins.com&subject=Insurance%20Tow%20Request&body=Todays%20Date:%20" + today + "%0ATime%20of%20Request:%20" + time + "%0ATow%20Requested%20By:%0AClaim%20#:%0APolicy%20Number:%0AInsured%20Name:%0AInsured%20Phone%20Number:%0AComplete%20VIN:%0AVehicle%20Year:%0AVehicle%20Make:%0AVehicle%20Model:%0AColor:%0ALicense%20Plate:%0AWhere%20is%20the%20Damage%20on%20the%20Vehicle:%0AKeys%20with%20Vehicle:%20If%20yes,%20where%20are%20the%20keys:%0APick-Up%20Location%20Address:%0APick-Up%20Location%20Phone%20Number:%0AName%20of%20the%20Body%20Shop%20for%20Drop-off:%0ADrop-off%20Location%20Address:%0ADrop-off%20Location%20Phone%20Number:%0AIs%20there%20a%20Payout,%20Yes%20or%20No:%0AIf%20Yes,%20to%20Whom%20is%20the%20Payout%20to:%0AForm%20of%20Payment%20accepted:%20(Cash%20or%20Check)%0AIs%20Payout%20amount%20for%20today%20or%20tomorrow:%0AWhat%20is%20the%20additional%20storage%20amount%20per%20day:%0AIf%20vehicle%20is%20in%20the%20City%20Pound,%20does%20it%20have%20a%20City%20Sticker:%0AIf%20vehicle%20is%20in%20the%20City%20Pound,%20what%20is%20the%20Inventory%20Number:' title='" + towTitle + "'>" + towText + "</a>"; -->
} else if (shops[i][8].indexOf(" Send Tow Request to Shop") !== -1) {
	if (shops[i][10] === "yesTow") {
		var tow = "<a href='mailto:" + shops[i][5] + "?subject=Insurance%20Tow%20Request&body=Todays%20Date:%20" + today + "%0ATime%20of%20Request:%20" + time + "%0ATow%20Requested%20By:%0AClaim%20#:%0APolicy%20Number:%0AInsured%20Name:%0AInsured%20Phone%20Number:%0AComplete%20VIN:%0AVehicle%20Year:%0AVehicle%20Make:%0AVehicle%20Model:%0AColor:%0ALicense%20Plate:%0AWhere%20is%20the%20Damage%20on%20the%20Vehicle:%0AKeys%20with%20Vehicle:%20If%20yes,%20where%20are%20the%20keys:%0APick-Up%20Location%20Address:%0APick-Up%20Location%20Phone%20Number:%0AName%20of%20the%20Body%20Shop%20for%20Drop-off:%0ADrop-off%20Location%20Address:%0ADrop-off%20Location%20Phone%20Number:%0AIs%20there%20a%20Payout,%20Yes%20or%20No:%0AIf%20Yes,%20to%20Whom%20is%20the%20Payout%20to:%0AForm%20of%20Payment%20accepted:%20(Cash%20or%20Check)%0AIs%20Payout%20amount%20for%20today%20or%20tomorrow:%0AWhat%20is%20the%20additional%20storage%20amount%20per%20day:%0AIf%20vehicle%20is%20in%20the%20City%20Pound,%20does%20it%20have%20a%20City%20Sticker:%0AIf%20vehicle%20is%20in%20the%20City%20Pound,%20what%20is%20the%20Inventory%20Number:' title='" + towTitle + "'>" + towText + "</a>";
	}else{
		var tow = "<a class='noTow'>Not Accepting Tows</a>";
	};
}else{
var tow = "<a id='toEle'  href='#' title='" + towTitle + "'>" + towText + "</a>";
}   
var dirDivEle = '';
var SMLatLng = new google.maps.LatLng(marker.getPosition().lat(), marker.getPosition().lng());
polyName = '';
displayCoordinates(SMLatLng);

						
				var location = new google.maps.LatLng(shops[i][6], shops[i][7]);
													
					sv.getPanoramaByLocation(location, 50, function(data, status) {
						if (shopDist.length !== 0) {
							dirDivEle = "<div class='dirDiv'><i class='bi bi-geo-alt'> </i><input id='iwButton' type='button' onClick='getDir()' value='Get Directions' title='Click to get directions from origin address to body shop.' class='button3'></div>"
						}else{
							dirDivEle = "";
						};
						
						if (status !== 'OK') {	
							infowindow.setContent("<div class='scrollFix'>" + locations[i][0].map(function(x){return x.replace(/<img(.*?)\><\/img>/, '');}) + "</b>" + "</b>" + "<div id='windowDiv' class='windowTxt'>" + distIcon + shopDist + "</div>" + dirDivEle + "<div style='text-align:center;padding:5px'>" /*<span class='" + towClass + "' title='" + shops[i][8] + "'></span>"*/ + "<span class='towTxt " + towClass + "' title='" + shops[i][8] + "'>" + tow + "</span></div>" + "<input id='clientAddress' type='text' style='display: none;'></div>")	
						}else {
							infowindow.setContent("<div class='scrollFix'>" + locations[i][0] + "</b>" + "</b>" + "<div id='windowDiv' class='windowTxt'>" + distIcon + shopDist + "</div>" + dirDivEle + "<div style='text-align:center;padding:5px'>" /*<span class='" + towClass + "' title='" + shops[i][8] + "'></span>" */ + "<span class='towTxt " + towClass + "' title='" + shops[i][8] + "'>" + tow + "</span></div>" + "<input id='clientAddress' type='text' style='display: none;'></div>")
						};
						
					});
		
                        //infowindow.setContent("<div class='scrollFix'>" + locations[i][0] + "</b>" + "</b>" + "<div id='windowDiv' class='windowTxt'>" + shopDist + "</div>" + "<div><span class='dir'></span><input id='iwButton' type='button' onClick='getDir()' value='Get Directions' title='Click to get directions from origin address to body shop.' class='button3'></div>" + "<div><span class='tow' title='" + shops[i][8] + "'></span>" + "<span class='towTxt' title='" + shops[i][8] + "'>" + tow + "</span></div>" + "<input id='clientAddress' type='text' style='display: none;'></div>")
						infowindow.setOptions({maxWidth:'fit-content'});
						infowindow.open(map, marker);

                        activeInfoWindow = infowindow;
					
						checkPlaceholder();
						
						google.maps.event.addListener(infowindow, "domready", () => {
						
								if (inPoly) {
									if (polyName !== 'ALL STAR TOWS') {
										if (typeof appraiserSpan === 'undefined') {
											$('.titleTxt').append('<pre id="appraiserSpan" style="font-weight:normal;font-size:13px;margin:0;font-family:Roboto;">Appraiser: ' + polyName + '</pre>');
											$('.titleTxt').append('<pre id="rateTable" style="font-weight:normal;font-size:13px;margin:0;font-family:Roboto;">Rate Table: ' + shops[i][11] + '</pre>');
										}else{
											$('#appraiserSpan').text('Appraiser: ' + polyName);
											if (typeof rateTable == 'undefined') {
												$('#appraiserSpan').append('<pre id="rateTable" style="font-weight:normal;font-size:13px;margin:0;font-family:Roboto;">Rate Table: ' + shops[i][11] + '</pre>');
											}else{
												$('#rateTable').text('Rate Table: ' + shops[i][11]);
											};
											};
									}else{
										if (typeof rateTable === 'undefined') {
											$('.titleTxt').append('<pre id="rateTable" style="font-weight:normal;font-size:13px;margin:0;font-family:Roboto;">Rate Table: ' + shops[i][11] + '</pre>');
										}else{
											$('#rateTable').text('Rate Table: ' + shops[i][11]);
										};
									};
								}else{
									 if (typeof rateTable === 'undefined') { 
										 //$('.titleTxt').append('<pre id="appraiserSpan" style="font-weight:normal;font-size:13px;margin:0;font-family:Roboto;">Appraiser: DOAN</pre>');
										 $('.titleTxt').append('<pre id="rateTable" style="font-weight:normal;font-size:13px;margin:0;font-family:Roboto;">Rate Table: ' + shops[i][11] + '</pre>');
									 }else{ 
										 //$('#appraiserSpan').text('Appraiser: DOAN'); 
										 //if (typeof rateTable === 'undefined') {
										//$('.titleTxt').append('<pre id="rateTable" style="font-weight:normal;font-size:13px;margin:0;font-family:Roboto;">Rate Table: ' + shops[i][11] + '</pre>');
										//}else{
											$('#rateTable').text('Rate Table: ' + shops[i][11]);
										 //};
										 }; 
								};
								var inputAddress = document.getElementById("clientAddress");
				
						if (inputAddress == null){
							map.setZoom(10);
							map.setCenter(marker.getPosition());
							
						}else{
							document.getElementById("clientAddress").value = document.getElementById("origin-input").value;
							map.setZoom(10);
							map.setCenter(marker.getPosition());
							
						}
					
						});
										$(".tow").toggleClass(function() {
										  if ( shops[i][10] === "yesTow") {
											return "yesTow";
										  } else {
											return "noTow";
										  }
										});
																	
						

                    }

                })(marker, i));
				
                markers.push(marker);
                latlngbounds.extend(marker.position);

                resetBounds = latlngbounds;
                geocoder = new google.maps.Geocoder();
                directionsService = new google.maps.DirectionsService();
                directionsDisplay = new google.maps.DirectionsRenderer({
                    suppressMarkers: true
                });
                directionsDisplay.setMap(map);
                directionsDisplay.setPanel(document.getElementById("directionsPanel"));

                google.maps.event.addListener(map, "click", function (event) {
                    infowindow.close();
			polyInfowindow.close();

                });

                var inputtest = document.getElementById("origin-input");
                <!-- inputtest.addEventListener('click', function () { -->
                    <!-- infowindow.close(); -->

                <!-- }); -->
if ($('script[src="geojson.js"]').length === 0){
	var script = document.createElement('script');
        script.src = 'geojson.js';
        document.getElementsByTagName('head')[0].appendChild(script);
}
         window.eqfeed_callback = function(results) {
 	var latlngPODbounds = new google.maps.LatLngBounds();
 	var PODmarker;
        for (var i = 0; i < results.features.length; i++) {
        let contentstring = '<b>Camera Number:</b> <br />' + results.features[i].properties.camera_number + '<p><b>Address:</b> <br />' + results.features[i].properties.address + '<br />' + results.features[i].properties.city + ', ' + results.features[i].properties.state + ' ' + results.features[i].properties.zip + '</p><a href="https://oemc-chicagops.govqa.us/WEBAPP/_rs/SupportHome.aspx?lp=7" target="_blank" title="12 - 15 day retention period">FOIA Request</a>' ;

          var coords = results.features[i].geometry.coordinates;
          var latLng = new google.maps.LatLng(coords[1],coords[0]);
          var podCam = {
		    url: 'podBig.png',
			scaledSize: new google.maps.Size(22, 22)
		};
          PODmarker = new google.maps.Marker({
          	position: latLng,
          	clickable: true,
            title: 'POD Camera # ' + results.features[i].properties.camera_number,
            icon: podCam
          });
          infoPODwindow = new google.maps.InfoWindow();
  			PODmarkers.push(PODmarker);
  			google.maps.event.addListener(PODmarker, 'click', (function(PODmarker, i) {
                    return function() {
                        map.setZoom(18);
                        map.setCenter(PODmarkers[i].getPosition());  
                        infoPODwindow.setContent(contentstring)
    	  				infoPODwindow.open(map, PODmarker);
    	  				activeInfoWindow = infoPODwindow;
    	  	if (!!circle) {
                circle.setMap(null);
            }
	  circle = new google.maps.Circle({
        center: PODmarker.getPosition(),
        radius: 100.584,
        fillColor: "#0000FF",
        fillOpacity: 0.1,
        map: map,
        strokeColor: "#FFFFFF",
        strokeOpacity: 0.1,
        title: 'POD camera viewable boundary highlighted in blue',
        strokeWeight: 2
      });        
      circles.push(circle);

      
      google.maps.event.addListener(circle,'mouseover',function(){
             this.getMap().getDiv().setAttribute('title',this.get('title'));});

        google.maps.event.addListener(circle,'mouseout',function(){
             this.getMap().getDiv().removeAttribute('title');});  
                    }
                    })(PODmarker, i));
		latlngPODbounds.extend(PODmarker.position);
          PODbounds = latlngPODbounds;
        }
        }
        	google.maps.event.addListener(map, "click", function (event) {
                    infoPODwindow.close();
			if (circle){circle.setMap(null);}
                });
            }
            new AutocompleteDirectionsHandler(map);
           
         
			 Mycounties.infoWindow = new google.maps.InfoWindow();         
			 for (i = 0; i < countyCoords.length; i++) {           
			Mycounties = new google.maps.Polygon({
			          paths: eval('countyCoords[i].coord'),
			          strokeColor: '#FF0000',
			          strokeOpacity: 0.5,
			          strokeWeight: 1,
			          fillColor: '#FF0000',
			          fillOpacity: 0.2,
					  zIndex: 1001
			        });
			tempcounties.push(Mycounties);

		function attachPolygonInfoWindow(Mycounties, html, state, img) {
		
			Mycounties.infoWindow = new google.maps.InfoWindow({
				content: "<div style='width: 250px; position: fixed; bottom: 50%; right: 0; border: 1px solid red; background: rgb(255, 255, 255); padding: 2px; font: 12px arial;'><div style='padding:2px;font: normal 10px verdana; background: #990000;'><div id='infoDiv' style='font: bold 12px verdana;margin:3px;padding:3px;color:#ffffff'><table cellspacing='2' cellpadding='0'><tbody><tr><td width='45'><img src='" + img + "' class='countyimg'></td><td valign='top' style='padding-left: 5px'>" + state + "<br>" + html + "<br></td></tr></tbody></table></div></div></div>",
				
			});
			google.maps.event.addListener(Mycounties, 'mouseover', function(e) {
				 
			});
		
			google.maps.event.addListener(Mycounties, 'mouseout', function() {
						
			});
			google.maps.event.addListener(Mycounties, 'doubleclick', function(e) {
			var latLng = e.latLng;
			map.setCenter(latLng);
			map.setZoom(9);
			
			});
			google.maps.event.addListener(Mycounties, 'click', function(e) {
			myWindow = document.getElementById("infoDivWrapper");
			document.getElementById("divTD").innerHTML = state + "<br>" + html + "<br>";
			document.getElementById("countyIMG").innerHTML = "<img src='" + img + "' class='countyimg'>";
			if (clickCo == null) {
				}else
			if (clickCo.fillOpacity == .1){
			clickCo.setOptions({fillOpacity:0.2});
			myWindow.style.display = "none";
			}
		
			if (this.fillOpacity == .2){
			this.setOptions({fillOpacity:0.1});
			myWindow.style.display = "inherit";
			}

			clickCo = this;
			//document.getElementById("origin-input").focus();
			});
			
		}

			attachPolygonInfoWindow(Mycounties, eval('countyCoords[i].name'), eval('countyCoords[i].state'), eval('countyCoords[i].img'));

       }
		
	var convertMiles = 1609.344;
for (var i = 0; i < appraisers.length; i++) {   
  //  Myappraisers = [];
   /*    
<!-- Myappraisers = new google.maps.Circle({ -->
      <!-- strokeColor: '#FF0000', -->
      <!-- strokeOpacity: 0.2, -->
      <!-- strokeWeight: 1, -->
      <!-- fillColor: '#FF0000', -->
      <!-- fillOpacity: 0.15, -->
      <!-- center: appraisers[i].coord, -->
      <!-- radius: Math.round(appraisers[i].circle) * convertMiles -->
    <!-- }); -->
*/
	/*
   Jerry = new google.maps.Polygon({
	paths: JerryCoords,
	strokeColor: "#c38dd9",
	strokeOpacity: .8,
	strokeWeight: 2,
	fillColor: "#c38dd9",
	fillOpacity: 0.35,
});

Steve = new google.maps.Polygon({
	paths: SteveCoords,
	strokeColor: "#f2c166",
	strokeOpacity: .8,
	strokeWeight: 2,
	fillColor: "#f2c166",
	fillOpacity: 0.35,
});

Abbie = new google.maps.Polygon({
	paths: AbbyCoords,
	strokeColor: "#68d663",
	strokeOpacity: .8,
	strokeWeight: 2,
	fillColor: "#68d663",
	fillOpacity: 0.35,
});

Bill = new google.maps.Polygon({
	paths: BillCoords,
	strokeColor: "#4599d9",
	strokeOpacity: .8,
	strokeWeight: 2,
	fillColor: "#4599d9",
	fillOpacity: 0.35,
});

Jim = new google.maps.Polygon({
	paths: JimCoords,
	strokeColor: "#81868a",
	strokeOpacity: .8,
	strokeWeight: 2,
	fillColor: "#81868a",
	fillOpacity: 0.35,
});

Procision = new google.maps.Polygon({
	paths: ProcisionCoords,
	strokeColor: "#90bbde",
	strokeOpacity: .8,
	strokeWeight: 2,
	fillColor: "#90bbde",
	fillOpacity: 0.35,
}); */

var appraiserPoly = new google.maps.Polygon({
	paths: appraisers[i].coord,
	strokeColor: rainbow(appraisers.length, i),
	strokeOpacity: .25,
	strokeWeight: 1,
	fillColor: rainbow(appraisers.length, i),
	fillOpacity: .25,
	zIndex: 1000,
	 content: appraisers[i].desc
});

appraiserPoly.addListener('mouseover', showArrays);

Myappraisers.push(appraiserPoly);
//Myappraisers.push(Steve);
//Myappraisers.push(Abbie);
//Myappraisers.push(Bill);
//Myappraisers.push(Jim);
//Myappraisers.push(Procision);
 
 //tempappraisers.push(Myappraisers);
//var strokeClr;
//var strokeWght;
//var zInx = 0;

//if (Myappraisers){
//var j = 0;
	
	//for (var x = 0; x < Myappraisers.length; x++) {

	//  var appDesc = appraisers[i].desc;
		
		//* google.maps.event.addListener(Myappraisers[x], 'mouseover', function(e) {
		//	 e.stop();
		//	
		//			 this.getMap().getDiv().setAttribute('title', appraisers[i].desc);
		//			strokeClr = this.get('strokeColor');
		//			strokeWght = this.get('strokeWeight');
		//			 this.setOptions({fillOpacity: .5, strokeColor: 'white', strokeWeight: 4, zIndex: 1000,});
		//						});*/	
	//};

		/* 
      //google.maps.event.addListener(Steve, 'mouseover', function() {
	//				 this.getMap().getDiv().setAttribute('title', appraisers[1].desc);
	//				 strokeClr = this.get('strokeColor');
	//				strokeWght = this.get('strokeWeight');
	//				 this.setOptions({fillOpacity: .5, strokeColor: 'white', strokeWeight: 4, zIndex: 1000,});
	//		});
	//	google.maps.event.addListener(Abbie, 'mouseover', function() {
	//				 this.getMap().getDiv().setAttribute('title', appraisers[2].desc);
	//				 strokeClr = this.get('strokeColor');
	//				strokeWght = this.get('strokeWeight');
	//				 this.setOptions({fillOpacity: .5, strokeColor: 'white', strokeWeight: 4, zIndex: 1000,});
	//		});
	//	google.maps.event.addListener(Bill, 'mouseover', function() {
	//				 this.getMap().getDiv().setAttribute('title', appraisers[3].desc);
	//				 strokeClr = this.get('strokeColor');
	//				strokeWght = this.get('strokeWeight');
	//				 this.setOptions({fillOpacity: .5, strokeColor: 'white', strokeWeight: 4, zIndex: 1000,});
	//		});
	//	google.maps.event.addListener(Jim, 'mouseover', function() {
	//				 this.getMap().getDiv().setAttribute('title', appraisers[4].desc);
	//				 strokeClr = this.get('strokeColor');
	//				strokeWght = this.get('strokeWeight');
	//				 this.setOptions({fillOpacity: .5, strokeColor: 'white', strokeWeight: 4, zIndex: 1000,});
	//		});
	//	google.maps.event.addListener(Procision, 'mouseover', function() {
	//				 this.getMap().getDiv().setAttribute('title', appraisers[5].desc);
	//				 strokeClr = this.get('strokeColor');
	//				strokeWght = this.get('strokeWeight');
	//				 this.setOptions({fillOpacity: .5, strokeColor: 'white', strokeWeight: 4, zIndex: 1000,});
	//		}); 
//*/
			
   for (var j=0; j < Myappraisers.length; j++) {
			google.maps.event.addListener(Myappraisers[j],'mouseout',function(e){
				//e.stop();
             this.getMap().getDiv().removeAttribute('title');
//			  this.setOptions({fillOpacity: .35, strokeColor: strokeClr, strokeWeight: strokeWght, zIndex: zInx,});
			 });
			// Myappraisers[j].setMap(map);
			 };
//			
	//}
		
}

showAppraisers();		
}
   
$(window).resize(function() {
map.fitBounds(resetBounds);
  if ($(this).width() < 800) {

    $('#testDiv').hide();
    $('#legend').hide();
	  map.setOptions({
		zoomControl: false,
		streetViewControl: false
	});

  } else {
if ($('#myForm').is(':hidden')) {
    $('#testDiv').show();
    }
	$('#legend').show();
	  map.setOptions({
		zoomControl: true,
		streetViewControl: true
	  });
    }

});


      
jQuery(document).bind("keyup keydown", function(e){
    if(e.ctrlKey && e.keyCode == 80){
        printAnyMaps();
	return false;
    }
});

 /**
 * @param numOfSteps: Total number steps to get color, means total colors
 * @param step: The step number, means the order of the color
 */
function rainbow(numOfSteps, step) {
    // This function generates vibrant, "evenly spaced" colours (i.e. no clustering). This is ideal for creating easily distinguishable vibrant markers in Google Maps and other apps.
    // Adam Cole, 2011-Sept-14
    // HSV to RBG adapted from: http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript
    var r, g, b;
    var h = step / numOfSteps;
    var i = ~~(h * 6);
    var f = h * 6 - i;
    var q = 1 - f;
    switch(i % 6){
        case 0: r = 1; g = f; b = 0; break;
        case 1: r = q; g = 1; b = 0; break;
        case 2: r = 0; g = 1; b = f; break;
        case 3: r = 0; g = q; b = 1; break;
        case 4: r = f; g = 0; b = 1; break;
        case 5: r = 1; g = 0; b = q; break;
    }
    var c = "#" + ("00" + (~ ~(r * 255)).toString(16)).slice(-2) + ("00" + (~ ~(g * 255)).toString(16)).slice(-2) + ("00" + (~ ~(b * 255)).toString(16)).slice(-2);
    return (c);
}
    </script>
<div id="legend"><h3>MAP LEGEND</h3></div>
                <div id="testDiv" class="customMapControldropdown" onmouseover="changeCSS();" onmouseout="changeCSSback();">
                    <button id="mapButton" class="customMapControlwrapper" disabled>Map</button>
                    <div class="customMapControldropdown-content" id="dropdownContent" >
                    <label class="container" id="container0" title="Toggle body shop markers">Shops
 						 <input type="checkbox" id="checkbox0" onclick="setMarkers();" checked>
  							<span class="checkmark"></span>
						</label>
                    <label class="container" id="container1" title="Toggle appraiser overlay">Appraisers
 						 <input type="checkbox" id="checkbox1" onclick="showAppraisers();" checked>
  							<span class="checkmark"></span>
						</label>
		    
                    <label class="container" id="container2" title="Toggle counties overlay">Counties
 						 <input type="checkbox" id="checkbox2" onclick="countiesDiv();">
  							<span class="checkmark"></span>
						</label>
					<label class="container" id="container3" title="Toggle satellite imagery">Satellite
 						 <input type="checkbox" id="checkbox3" onclick="satMap();">
  							<span class="checkmark"></span>
						</label>	
                    <label class="container" id="container4" title="Toggle CPD POD Cameras">POD Cams
 						 <input type="checkbox" id="checkbox4" onclick="setPODS();">
  							<span class="checkmark"></span>
						</label>	    
                    <label class="container" id="container5" title="Toggle Points of Interest">POI's
 						 <input type="checkbox" id="checkbox5" onchange="HideShowPOIs();" checked>
  							<span class="checkmark"></span>
						</label>
			<label class="container" id="container6" title="Toggle hail markers">Hail
 						 <input type="checkbox" id="checkbox6" onclick="setHailMarkers();">
  							<span class="checkmark"></span>
						</label>    
                        
                    </div>
                </div>
     <button id="sync" onClick="syncShops();" / class="button1"><i class="fas fa-sync"></i></button>           
    <input id="origin-input" class="controls" type="text"
           placeholder="Enter an origin location">

	 <label for "orig" style="display: none;">Origin:</label>
    <input id="orig" type="text" style="display: none;" readonly class="originput">
    <button id="clear" onClick="clearDir();" / class="button1">CLEAR</button>
    <button id="listShops" onclick="GenerateTable();" / class="button1">LIST</button>
    <button id="clickMe" onclick="clicky();" / class="button1" disabled>SEARCH</button>
	
	<div class="column1" id="map"></div>
	<div class="column2" id="wholetable">
	

        <div id="main" class="clear">
            <div id="sidebar">
                <div class="dropdown">
                    <button class="btn2" disabled><b>SORT SHOPS</b></button>
                    <div class="dropdown-content">
                        <a id="sortMe"  href=# onclick="sortTime();" /><i class="fas fa-clock"> by Travel Time</i></a>
                        <a id="sortMe2"  href=# onclick="sortDist();" /><i class="fas fa-map-marked-alt"> by Travel Distance</i></a>
                    </div>
                </div>
            </div>                
            <div id="page-wrap">
                <center class="sortTxt" id="sortedBy"></center>
            </div>
		<a title="Print Shop List" onclick="printFilteredShopList()" id="printButton3" style="color:black;float:right;cursor:pointer;padding-right:5px;padding-top:5px;"><i class="material-icons">print</i></a>
        </div>
        <form id="myForm">
            <table id="myTable" >
                <colgroup>
                    <col style="background-color:white">
                </colgroup>
                
            </table>
        </form>
    </div>
	<div id="directionsPanel"></div>
	<div id="dvTable"></div>
	<div id="output"></div>

    <p id="markerPos" style="display: none;"</p>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyActTShUbrnDKcB4P94Qh4cj3JpsvdAjyE&libraries=places&callback=initMap"
            async defer></script>
    
<div id="infoDivWrapper" style="display: none; width: auto; position: fixed; bottom: 50%; right: 0; border: 1px solid red; background: rgb(255, 255, 255); padding: 2px; font: 12px arial;">
<div style="padding:2px;font: normal 10px verdana; background: #990000;">
<div id="infoDiv" style="font: bold 12px verdana;margin:3px;padding:3px;color:#ffffff">
<table cellspacing="2" cellpadding="0">
<tbody>
<tr>
<td id="countyIMG" width="45"><img src="IL.png">
</td>
<td id="divTD" valign="top" style="padding-left: 5px">
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


</body>

</html>
